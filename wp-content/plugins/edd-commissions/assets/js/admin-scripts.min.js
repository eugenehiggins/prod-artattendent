jQuery(document).ready(function(e){if(e("#commission-payouts").submit(function(){return confirm(eddc_vars.confirm_payout)?!0:!1}),e(".edd_datepicker").length>0){var t="mm/dd/yy";e(".edd_datepicker").datepicker({dateFormat:t})}if(e(".edd_commission_datepicker").length>0){var d="yy-mm-dd";e(".edd_commission_datepicker").datepicker({dateFormat:d})}e(".eddc-commissions-export-toggle").click(function(){e(".eddc-commissions-export-toggle").toggle(),e("#eddc-export-commissions").toggle()}),e("body").on("click",".eddc-download-payout-file",function(t){e(this).attr("disabled","disabled"),e("#eddc-export-commissions").hide(),e("#eddc-export-commissions-mark-as-paid").show(),window.scrollTo(0,0)}),e("#edd_commisions_enabled").change(function(){var t=e(this).is(":checked"),d=e(".eddc_toggled_row");t?(e("body").hasClass("mobile")?e(".edd_repeatable_row").find(".edd-select-chosen").css("width","100%"):e(".edd_repeatable_row").find(".edd-select-chosen").css("width","300px"),d.show()):d.hide()}),e("#edd_download_commissions").on("click",function(){if(!e("#edd_download_commissions").hasClass("closed")){var t=e("#edd_commisions_enabled").is(":checked"),d=e(".eddc_toggled_row");t?(e("body").hasClass("mobile")?e(".edd_repeatable_row").find(".edd-select-chosen").css("width","100%"):e(".edd_repeatable_row").find(".edd-select-chosen").css("width","300px"),d.show()):d.hide()}}),e('.eddc-add-commission input[name="type"]').on("change",function(){var t=e(this).val(),d=e("#eddc-add-rate-row");"percentage"===t?d.find("input").prop("disabled",""):d.find("input").prop("disabled","disabled")});var i={init:function(){this.add(),this.remove()},clone_repeatable:function(t){var d=highest=1;return t.parent().find("tr.edd_repeatable_row").each(function(){var t=e(this).data("key");parseInt(t)>highest&&(highest=t)}),d=highest+=1,clone=t.clone(),clone.find("select").each(function(){e(this).val(t.find('select[name="'+e(this).attr("name")+'"]').val())}),clone.removeClass("edd_add_blank"),clone.attr("data-key",d),clone.find("td input, td select, textarea").val(""),clone.find("input, select, textarea").each(function(){var t=e(this).attr("name"),i=e(this).attr("id");t&&(t=t.replace(/\[(\d+)\]/,"["+parseInt(d)+"]"),e(this).attr("name",t)),e(this).attr("data-key",d),"undefined"!=typeof i&&(i=i.replace(/(\d+)/,parseInt(d)),e(this).attr("id",i))}),clone.find("span.edd_price_id").each(function(){e(this).text(parseInt(d))}),clone.find("span.edd_file_id").each(function(){e(this).text(parseInt(d))}),clone.find(".edd_repeatable_default_input").each(function(){e(this).val(parseInt(d)).removeAttr("checked")}),clone.find(".edd_repeatable_condition_field").each(function(){e(this).find("option:eq(0)").prop("selected","selected")}),clone.find(".search-choice").remove(),clone.find(".chosen-container").remove(),clone},add:function(){e(document.body).on("click",".submit .edd_commission_rates_add_repeatable",function(t){t.preventDefault();var d=e(this),n=d.parent().parent().prev("tr"),a=i.clone_repeatable(n);a.insertAfter(n).find("input, textarea, select").filter(":visible").eq(0).focus(),a.find(".edd-select-chosen").chosen({inherit_select_classes:!0,placeholder_text_single:edd_vars.one_option,placeholder_text_multiple:edd_vars.one_or_more_option}),a.find(".edd-select-chosen").css("width","300px")})},remove:function(){e(document.body).on("click",".edd_commissions_remove_repeatable",function(t){t.preventDefault();var d,i,n,a=e(this).parent().parent("tr"),s=a.parent().find("tr").length-1,o="tr.edd_repeatable_commissions";d=e(this).is(".ui-sortable tr:first-child .edd_remove_repeatable:first-child")?a.next("tr"):a.prev("tr"),i=d.find("select, input, textarea, button").filter(":visible"),n=i.eq(0),s>1?(e("input, select",a).val(""),a.fadeOut("fast").remove(),n.focus()):alert(edd_vars.one_field_min),e(o).each(function(t){e(this).data("key",t),e(this).find("input, select").each(function(){var d=e(this).attr("name");"undefined"!=typeof d&&(d=d.replace(/\[(\d+)\]/,"["+t+"]"),e(this).attr("name",d).attr("id",d))})})})}};i.init();var n={init:function(){this.verify(),this.type(),this.status()},verify:function(){e("#add-item-info").submit(function(t){e("div.alert").remove();var d=e(this).find("input.required,select.required"),i=!1;if(d.each(function(){e(this).val()&&""!=e(this).val()&&0!=e(this).val()||(i=!0)}),i){var n='<div class="alert error"><p>'+eddc_vars.required_fields+"</p></div>";e("#edd-item-card-wrapper").before(n),t.preventDefault()}})},type:function(){e('input[name="type"]').change(function(){var t=e(this).val();"percentage"===t?e("#eddc-add-rate-row").attr("disabled",""):e("#eddc-add-rate-row").attr("disabled","disabled")})},status:function(){e('select[name="status"]').change(function(){var t=e(this).val(),d=e("#date_paid");"paid"==t?d.removeAttr("disabled"):d.attr("disabled","disabled")})}};n.init(),e("#eddc-commission-delete-comfirm").change(function(){var t=e("#eddc-delete-commission");e(this).prop("checked")?t.attr("disabled",!1):t.attr("disabled",!0)}),e(".eddc-edit-commission").on("click",function(t){t.preventDefault();var d=e(this);d.text()===eddc_vars.action_edit?d.text(eddc_vars.action_cancel):(e("#eddc_update_commission").fadeOut("fast",function(){e(this).css("display","none")}),d.text(eddc_vars.action_edit)),e("#edit-item-info input.edd_commission_datepicker").toggle(),e("#eddc_user_chosen").toggle(),e("#eddc_download_chosen").toggle(),e(".eddc-commission-rate").toggle(),e(".eddc-commission-amount").toggle()}),e("body").on("change",".eddc-commission-card input",function(){e("#eddc_update_commission").fadeIn("fast").css("display","inline-block")});var a={init:function(){this.type()},type:function(){e('select[name="edd-export-class"]').change(function(t){var d=e(this).val();"EDD_Batch_Commissions_Report_Export"==d?e("#eddc_export_status").attr("disabled","disabled"):e("#eddc_export_status").removeAttr("disabled")})}};a.init()});